{% extends 'main.html' %}

{% block form_agregar %}
    {% for field in f %}
        <p>{{ field.label_tag }}: {{ field }}</p>
        {{ field.errors }}
    {% endfor %}
    <p><strong>Título de la reseña:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Título de la reseña, no del libro o revista.">
            <i class="fa fa-question-circle"></i>
        </a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon">
                <i class="fa fa-pencil-square-o"></i>
            </div>
            {{ form.titulo }}
        </div>
    </div>
    </p>
    <p><strong>Descripción: <a href="#" data-toggle="tooltip" data-placement="right"
                               title="Descripción detallada adicional, por ejemplo información que no está contemplada en los demás campos.">
        <i class="fa fa-question-circle"></i></a></strong>
        {{ form.descripcion }}
    </p>
    <p><strong>Tipo:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Tipo de publicación reseñada, puede ser un libro o una revista.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-list-alt"></i></div>
            {{ form.tipo }}
        </div>
    </div>
    </p>
    <div id="d_libro_resenado">
        <p><strong>Libro reseñado:</strong>
            <a href="#" data-toggle="tooltip" data-placement="right"
               title="Libro sobre el que se hizo la reseña de este registro.">
                <i class="fa fa-question-circle"></i>
            </a> <i class="fa fa-edit"></i>
        <div class="form-group" style="margin-top: -10px;">
            <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-book"></i></div>
                {{ form.libro_resenado }}
                <div class="input-group-addon">
                    <a href="#" data-toggle="tooltip" data-placement="left"
                       title="Mostrar los detalles adicionales del libro seleccionado.">
                        <i class="fa fa-eye"></i>
                    </a>
                </div>
                <div class="input-group-addon">
                    <a href="/investigacion/libros-investigacion/" data-toggle="tooltip" data-placement="left"
                       target="_blank"
                       title="Agregar un libro nuevo. Cuando no existe en los registros, aquí se puede dar de alta.">
                        <i class="fa fa-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        </p>
    </div>
    <div id="d_articulo_resenado">
        <p><strong>Artículo reseñado:</strong>
            <a href="#" data-toggle="tooltip" data-placement="right"
               title="Artículo sobre el que se hizo la reseña de este registro.">
                <i class="fa fa-question-circle"></i>
            </a> <i class="fa fa-edit"></i>
        <div class="form-group" style="margin-top: -10px;">
            <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-book"></i></div>
                {{ form.articulo_resenado }}
                <div class="input-group-addon">
                    <a href="#" data-toggle="tooltip" data-placement="left"
                       title="Mostrar los detalles adicionales del artículo seleccionado.">
                        <i class="fa fa-eye"></i>
                    </a>
                </div>
                <div class="input-group-addon">
                    <a href="/investigacion/articulos-cientificos/" data-toggle="tooltip" data-placement="left"
                       target="_blank"
                       title="Agregar un artículo nuevo. Cuando no existe en los registros, aquí se puede dar de alta.">
                        <i class="fa fa-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        </p>
    </div>
    <p><strong>Autores:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Autores , al escribir el inicio del nombre o apellido se filtran
                            los resultados que coincidan con la busqueda.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-users"></i></div>
            {{ form.autores }}
            <div class="input-group-addon">
                <a href="#" data-toggle="tooltip" data-placement="left"
                   title="Mostrar los detalles adicionales de los autores.">
                    <i class="fa fa-eye"></i>
                </a>
            </div>
            <div class="input-group-addon">
                <a href="/nucleo/usuarios" data-toggle="tooltip" data-placement="left" target="_blank"
                   title="Agregar un autor nuevo. Cuando no existe en los registros, aquí se puede dar de alta.">
                    <i class="fa fa-plus"></i>
                </a>
            </div>
        </div>
    </div>
    </p>
    <p><strong>Fecha:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Fecha."><i
                class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon">
                <i class="fa fa-calendar"></i>
            </div>
            {{ form.fecha }}
        </div>
    </div>
    </p>
    <p><strong>Revista donde se publica la reseña:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Revista donde se publica la reseña de este registro.">
            <i class="fa fa-question-circle"></i>
        </a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-book"></i></div>
            {{ form.revista_publica }}
            <div class="input-group-addon">
                <a href="#" data-toggle="tooltip" data-placement="left"
                   title="Mostrar los detalles adicionales de la revista seleccionada.">
                    <i class="fa fa-eye"></i>
                </a>
            </div>
            <div class="input-group-addon">
                <a href="/nucleo/revistas" data-toggle="tooltip" data-placement="left" target="_blank"
                   title="Agregar una revista nueva. Cuando no existe en los registros, aquí se puede dar de alta.">
                    <i class="fa fa-plus"></i>
                </a>
            </div>
        </div>
    </div>
    </p>
    <p><strong>Página inicial:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Número de página donde inicia la reseña.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon"><i class="fa fa-sort-numeric-desc"></i></div>
            {{ form.pagina_inicio }}
        </div>
    </div>
    </p>
    <p><strong>Página final:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Número de página donde finaliza la reseña.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon"><i class="fa fa-sort-numeric-desc"></i></div>
            {{ form.pagina_fin }}
        </div>
    </div>
    </p>
    <p><strong>URL:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="URL, en caso de estan publicado en algún lugar en internet."><i
                class="fa fa-question-circle"></i></a>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon">
                <i class="fa fa-link"></i>
            </div>
            {{ form.url }}
        </div>
    </div>
    </p>

    <script>
        $("#id_autores").on("select2:select", function (evt) {
            var element = evt.params.data.element;
            var $element = $(element);
            $element.detach();
            $(this).append($element);
            $(this).trigger("change");
        });

        $('#d_articulo_resenado').hide();
        $('#d_libro_resenado').hide();

        $("#id_tipo").on('change', function () {
                if ($("#id_tipo").val() == 'ARTICULO') {
                    $('#d_articulo_resenado').show('slow');
                    $('#id_articulo_resenado').attr("required", "true");
                    $('#d_libro_resenado').hide('slow');
                    $('#id_libro_resenado').attr("required", null);
                    $('#id_libro_resenado').val(null).trigger("change");
                } else if ($("#id_tipo").val() == 'LIBRO') {
                    $('#d_libro_resenado').show('slow');
                    $('#id_libro_resenado').attr("required", "true");
                    $('#d_articulo_resenado').hide('slow');
                    $('#id_articulo_resenado').attr("required", null);
                    $('#id_articulo_resenado').val(null).trigger("change");
                } else {
                    $('#id_libro_resenado').attr("required", null);
                    $('#id_articulo_resenado').attr("required", null);
                    $('#id_libro_resenado').val(null).trigger("change");
                    $('#id_articulo_resenado').val(null).trigger("change");
                    $('#d_articulo_resenado').hide('slow');
                    $('#d_libro_resenado').hide('slow');

                }
            }
        );
    </script>

{% endblock %}

{% block form_detalle %}
    {% for field in f %}
        <p>{{ field.label_tag }}: {{ field }}</p>
        {{ field.errors }}
    {% endfor %}
    <p><strong>Título de la reseña:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Título de la reseña, no del libro o revista.">
            <i class="fa fa-question-circle"></i>
        </a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon">
                <i class="fa fa-pencil-square-o"></i>
            </div>
            {{ form.titulo }}
        </div>
    </div>
    </p>
    <p><strong>Descripción: <a href="#" data-toggle="tooltip" data-placement="right"
                               title="Descripción detallada adicional, por ejemplo información que no está contemplada en los demás campos.">
        <i class="fa fa-question-circle"></i></a></strong>
        {{ form.descripcion }}
    </p>
    <p><strong>Tipo:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Tipo de publicación reseñada, puede ser un libro o una revista.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-list-alt"></i></div>
            {{ form.tipo }}
        </div>
    </div>
    </p>
    <div id="d_libro_resenado">
        <p><strong>Libro reseñado:</strong>
            <a href="#" data-toggle="tooltip" data-placement="right"
               title="Libro sobre el que se hizo la reseña de este registro.">
                <i class="fa fa-question-circle"></i>
            </a> <i class="fa fa-edit"></i>
        <div class="form-group" style="margin-top: -10px;">
            <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-book"></i></div>
                {{ form.libro_resenado }}
                <div class="input-group-addon">
                    <a href="#" data-toggle="tooltip" data-placement="left"
                       title="Mostrar los detalles adicionales del libro seleccionado.">
                        <i class="fa fa-eye"></i>
                    </a>
                </div>
                <div class="input-group-addon">
                    <a href="/investigacion/libros-investigacion/" data-toggle="tooltip" data-placement="left"
                       target="_blank"
                       title="Agregar un libro nuevo. Cuando no existe en los registros, aquí se puede dar de alta.">
                        <i class="fa fa-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        </p>
    </div>
    <div id="d_articulo_resenado">
        <p><strong>Artículo reseñado:</strong>
            <a href="#" data-toggle="tooltip" data-placement="right"
               title="Artículo sobre el que se hizo la reseña de este registro.">
                <i class="fa fa-question-circle"></i>
            </a> <i class="fa fa-edit"></i>
        <div class="form-group" style="margin-top: -10px;">
            <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-book"></i></div>
                {{ form.articulo_resenado }}
                <div class="input-group-addon">
                    <a href="#" data-toggle="tooltip" data-placement="left"
                       title="Mostrar los detalles adicionales del artículo seleccionado.">
                        <i class="fa fa-eye"></i>
                    </a>
                </div>
                <div class="input-group-addon">
                    <a href="/investigacion/articulos-cientificos/" data-toggle="tooltip" data-placement="left"
                       target="_blank"
                       title="Agregar un artículo nuevo. Cuando no existe en los registros, aquí se puede dar de alta.">
                        <i class="fa fa-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        </p>
    </div>
    <p><strong>Autores:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Autores , al escribir el inicio del nombre o apellido se filtran
                            los resultados que coincidan con la busqueda.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-users"></i></div>
            {{ form.autores }}
            <div class="input-group-addon">
                <a href="#" data-toggle="tooltip" data-placement="left"
                   title="Mostrar los detalles adicionales de los autores.">
                    <i class="fa fa-eye"></i>
                </a>
            </div>
            <div class="input-group-addon">
                <a href="/nucleo/usuarios" data-toggle="tooltip" data-placement="left" target="_blank"
                   title="Agregar un autor nuevo. Cuando no existe en los registros, aquí se puede dar de alta.">
                    <i class="fa fa-plus"></i>
                </a>
            </div>
        </div>
    </div>
    </p>
    <p><strong>Fecha:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Fecha."><i
                class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon">
                <i class="fa fa-calendar"></i>
            </div>
            {{ form.fecha }}
        </div>
    </div>
    </p>
    <p><strong>Revista donde se publica la reseña:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Revista donde se publica la reseña de este registro.">
            <i class="fa fa-question-circle"></i>
        </a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-book"></i></div>
            {{ form.revista_publica }}
            <div class="input-group-addon">
                <a href="#" data-toggle="tooltip" data-placement="left"
                   title="Mostrar los detalles adicionales de la revista seleccionada.">
                    <i class="fa fa-eye"></i>
                </a>
            </div>
            <div class="input-group-addon">
                <a href="/nucleo/revistas" data-toggle="tooltip" data-placement="left" target="_blank"
                   title="Agregar una revista nueva. Cuando no existe en los registros, aquí se puede dar de alta.">
                    <i class="fa fa-plus"></i>
                </a>
            </div>
        </div>
    </div>
    </p>
    <p><strong>Página inicial:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Número de página donde inicia la reseña.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon"><i class="fa fa-sort-numeric-desc"></i></div>
            {{ form.pagina_inicio }}
        </div>
    </div>
    </p>
    <p><strong>Página final:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="Número de página donde finaliza la reseña.">
            <i class="fa fa-question-circle"></i></a> <i class="fa fa-edit"></i>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon"><i class="fa fa-sort-numeric-desc"></i></div>
            {{ form.pagina_fin }}
        </div>
    </div>
    </p>
    <p><strong>URL:</strong>
        <a href="#" data-toggle="tooltip" data-placement="right"
           title="URL, en caso de estan publicado en algún lugar en internet."><i
                class="fa fa-question-circle"></i></a>
    <div class="form-group" style="margin-top: -10px;">
        <div class="input-group date">
            <div class="input-group-addon">
                <i class="fa fa-link"></i>
            </div>
            {{ form.url }}
        </div>
    </div>
    </p>

    <script>
        $("#id_autores").on("select2:select", function (evt) {
            var element = evt.params.data.element;
            var $element = $(element);
            $element.detach();
            $(this).append($element);
            $(this).trigger("change");
        });


        $('#d_articulo_resenado').hide();
        $('#d_libro_resenado').hide();

        if ($("#id_tipo").val() == 'ARTICULO') {
            $('#d_articulo_resenado').show();
            $('#id_articulo_resenado').attr("required", "true");
        } else if ($("#id_tipo").val() == 'LIBRO') {
            $('#d_libro_resenado').show();
            $('#id_libro_resenado').attr("required", "true");
        } else {
            $('#d_libro_resenado').show();
            $('#d_articulo_resenado').show();
        }

        $("#id_tipo").on('change', function () {
                if ($("#id_tipo").val() == 'ARTICULO') {
                    $('#d_articulo_resenado').show('slow');
                    $('#id_articulo_resenado').attr("required", "true");
                    $('#d_libro_resenado').hide('slow');
                    $('#id_libro_resenado').attr("required", null);
                    $('#id_libro_resenado').val(null).trigger("change");
                } else if ($("#id_tipo").val() == 'LIBRO') {
                    $('#d_libro_resenado').show('slow');
                    $('#id_libro_resenado').attr("required", "true");
                    $('#d_articulo_resenado').hide('slow');
                    $('#id_articulo_resenado').attr("required", null);
                    $('#id_articulo_resenado').val(null).trigger("change");
                } else {
                    $('#id_libro_resenado').attr("required", null);
                    $('#id_articulo_resenado').attr("required", null);
                    $('#id_libro_resenado').val(null).trigger("change");
                    $('#id_articulo_resenado').val(null).trigger("change");
                    $('#d_articulo_resenado').hide('slow');
                    $('#d_libro_resenado').hide('slow');

                }
            }
        );
    </script>

{% endblock %}
