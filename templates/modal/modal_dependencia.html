<div class="modal fade" id="agregar-dependencia1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Agregar dependencia</h4>
            </div>
            <div class="modal-body">
                <div id="agregar-dependencia-modal-body1"></div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="detalle-dependencia">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Detalle dependencia</h4>
            </div>
            <div class="modal-body">
                <div id="detalle-dependencia-modal-body2"></div>
            </div>
        </div>
    </div>
</div>


<div id="agregar-dependencia2" class="modal fade" tabindex="-1" data-focus-on="input:first" style="display: none;">

    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title">Agregar dependencia</h4>
        </div>
        <div class="modal-body">
            <div id="agregar-dependencia-modal-body2"></div>
        </div>
    </div>

</div>


<div id="stack1" class="modal fade" tabindex="-1" data-focus-on="input:first" style="display: none;">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Stack One</h4>
    </div>
    <div class="modal-body">
        <p>One fine body…</p>
        <p>One fine body…</p>
        <p>One fine body…</p>
        <input class="form-control" type="text" data-tabindex="1">
        <input class="form-control" type="text" data-tabindex="2">
        <button class="btn btn-default" data-toggle="modal" href="#stack2">Launch modal</button>
    </div>
    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
        <button type="button" class="btn btn-primary">Ok</button>
    </div>
</div>

<div id="stack2" class="modal fade" tabindex="-1" data-focus-on="input:first" style="display: none;">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Stack Two</h4>
    </div>
    <div class="modal-body">
        <p>One fine body…</p>
        <p>One fine body…</p>
        <input class="form-control" type="text" data-tabindex="1">
        <input class="form-control" type="text" data-tabindex="2">
        <button class="btn btn-default" data-toggle="modal" href="#stack3">Launch modal</button>
    </div>
    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
        <button type="button" class="btn btn-primary">Ok</button>
    </div>
</div>

<div id="stack3" class="modal fade" tabindex="-1" data-focus-on="input:first" style="display: none;">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Stack Three</h4>
    </div>
    <div class="modal-body">
        <p>One fine body…</p>
        <input class="form-control" type="text" data-tabindex="1">
        <input class="form-control" type="text" data-tabindex="2">
    </div>
    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
        <button type="button" class="btn btn-primary">Ok</button>
    </div>
</div>


<script>

    function addUser() {
        alert("ygjgjhg")
        var valid = true;
        allFields.removeClass("ui-state-error");

        valid = valid && checkLength(name, "username", 3, 16);
        valid = valid && checkLength(email, "email", 6, 80);
        valid = valid && checkLength(password, "password", 5, 16);

        valid = valid && checkRegexp(name, /^[a-z]([0-9a-z_\s])+$/i, "Username may consist of a-z, 0-9, underscores, spaces and must begin with a letter.");
        valid = valid && checkRegexp(email, emailRegex, "eg. ui@jquery.com");
        valid = valid && checkRegexp(password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9");

        if (valid) {
            $("#users tbody").append("<tr>" +
                "<td>" + name.val() + "</td>" +
                "<td>" + email.val() + "</td>" +
                "<td>" + password.val() + "</td>" +
                "</tr>");
            dialog.dialog("close");
        }
        return valid;
    }

    $(function () {
        agregar_dependencia_dialog = $("#agregar-dependencia").dialog({
            autoOpen: false,
            height: 580,
            width: 900,
            modal: true,
            buttons: {
                create: {
                    text: "createetrert",
                    click: addUser,
                    class: 'btn btn-success ui-button-left'
                },
                Cancel: function () {
                    agregar_dependencia_dialog.dialog("close");
                }
            },
            open: function (event, ui) {
                $('#agregar-dependencia-modal-body').load('/nucleo/dependencias/agregar/', function () {
                    $("#id_institucion_dependencia").djangoSelect2({dropdownParent: $("#agregar-dependencia")});
                    $("#id_subsistema_unam_dependencia").djangoSelect2({dropdownParent: $("#agregar-dependencia")});
                    this.height = 600;
                });
            }
        });


        $("#boton-agregar-dependencia").on("click", function () {
            $("#agregar-dependencia").dialog("open");
        });
    });

    $("#agregar-dependencia").on('shown.bs.modal', function () {
        $('#agregar-dependencia-modal-body').load('/nucleo/dependencias/agregar/', function () {
            $("#id_institucion_dependencia").djangoSelect2({dropdownParent: $("#agregar-dependencia")});
            $("#id_subsistema_unam_dependencia").djangoSelect2({dropdownParent: $("#agregar-dependencia")});
        })
    });

</script>


<div id="agregar-dependencia" title="Create new user">
    <div id="agregar-dependencia-modal-body"></div>
</div>